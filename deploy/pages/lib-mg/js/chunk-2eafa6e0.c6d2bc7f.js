(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2eafa6e0"],{4312:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{staticStyle:{height:"495px",border:"1px solid #eee"}},[s("el-aside",{staticStyle:{height:"495px","background-color":"#FFF"},attrs:{width:"200px"}},[s("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"tree",attrs:{data:e.menuTree,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1),s("el-container",[s("el-header",{staticStyle:{"text-align":"left","font-size":"12px","margin-left":"30px"}},[s("div",[s("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleAddSub}},[e._v("添加子节点")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.disabled&&"0"!=e.menuForm.id,expression:"disabled && menuForm.id != '0'"}],attrs:{round:""},on:{click:e.handleEdit}},[e._v("编辑")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&"0"!=e.menuForm.id,expression:"!disabled && menuForm.id != '0'"},{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"success",round:""},on:{click:e.saveEdit}},[e._v("保存")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.menuForm.id,expression:"menuForm.id != '0'"}],attrs:{type:"danger",round:""},on:{click:e.handleDel}},[e._v("删除")])],1)]),s("el-main",[s("el-form",{ref:"menuForm",staticClass:"demo-ruleForm",staticStyle:{width:"500px"},attrs:{model:e.menuForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{attrs:{disabled:e.disabled},model:{value:e.menuForm.title,callback:function(t){e.$set(e.menuForm,"title",t)},expression:"menuForm.title"}})],1),s("el-form-item",{attrs:{label:"访问路由"}},[s("el-input",{attrs:{disabled:e.disabled},model:{value:e.menuForm.index,callback:function(t){e.$set(e.menuForm,"index",t)},expression:"menuForm.index"}})],1),s("el-form-item",{attrs:{label:"权限",prop:"permission"}},[s("el-input",{attrs:{disabled:e.disabled},model:{value:e.menuForm.permission,callback:function(t){e.$set(e.menuForm,"permission",t)},expression:"menuForm.permission"}})],1),s("el-form-item",{attrs:{label:"图标",prop:"icon"}},[s("el-input",{attrs:{disabled:e.disabled},model:{value:e.menuForm.icon,callback:function(t){e.$set(e.menuForm,"icon",t)},expression:"menuForm.icon"}})],1),s("el-form-item",{attrs:{label:"排序",prop:"seq"}},[s("el-input",{attrs:{disabled:e.disabled},model:{value:e.menuForm.seq,callback:function(t){e.$set(e.menuForm,"seq",t)},expression:"menuForm.seq"}})],1),s("el-form-item",{attrs:{label:"状态",prop:"state"}},[s("el-radio-group",{attrs:{disabled:e.disabled},model:{value:e.menuForm.state,callback:function(t){e.$set(e.menuForm,"state",t)},expression:"menuForm.state"}},[s("el-radio-button",{attrs:{label:"有效"}}),s("el-radio-button",{attrs:{label:"无效"}})],1)],1),s("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[s("el-radio-group",{attrs:{disabled:e.disabled},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",t)},expression:"menuForm.type"}},[s("el-radio-button",{attrs:{label:"菜单"}}),s("el-radio-button",{attrs:{label:"按钮"}})],1)],1)],1)],1)],1),s("el-dialog",{attrs:{title:"删除确认",visible:e.delVisible,width:"30%",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[s("span",[e._v("是否确认删除该节点及该节点下的所有子节点？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.delMenu}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"新增",visible:e.editVisible,width:"40%"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{ref:"subForm",staticClass:"demo-ruleForm",attrs:{model:e.subForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"上级菜单",prop:"parentName"}},[s("el-input",{attrs:{disabled:!0},model:{value:e.subForm.parentName,callback:function(t){e.$set(e.subForm,"parentName",t)},expression:"subForm.parentName"}})],1),s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{model:{value:e.subForm.title,callback:function(t){e.$set(e.subForm,"title",t)},expression:"subForm.title"}})],1),s("el-form-item",{attrs:{label:"访问路由"}},[s("el-input",{model:{value:e.subForm.index,callback:function(t){e.$set(e.subForm,"index",t)},expression:"subForm.index"}})],1),s("el-form-item",{attrs:{label:"权限",prop:"permission"}},[s("el-input",{model:{value:e.subForm.permission,callback:function(t){e.$set(e.subForm,"permission",t)},expression:"subForm.permission"}})],1),s("el-form-item",{attrs:{label:"图标",prop:"icon"}},[s("el-input",{model:{value:e.subForm.icon,callback:function(t){e.$set(e.subForm,"icon",t)},expression:"subForm.icon"}})],1),s("el-form-item",{attrs:{label:"排序",prop:"seq"}},[s("el-input",{model:{value:e.subForm.seq,callback:function(t){e.$set(e.subForm,"seq",t)},expression:"subForm.seq"}})],1),s("el-form-item",{attrs:{label:"状态",prop:"state"}},[s("el-radio-group",{model:{value:e.subForm.state,callback:function(t){e.$set(e.subForm,"state",t)},expression:"subForm.state"}},[s("el-radio-button",{attrs:{label:"有效"}}),s("el-radio-button",{attrs:{label:"无效"}})],1)],1),s("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[s("el-radio-group",{model:{value:e.subForm.type,callback:function(t){e.$set(e.subForm,"type",t)},expression:"subForm.type"}},[s("el-radio-button",{attrs:{label:"菜单"}}),s("el-radio-button",{attrs:{label:"按钮"}})],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.saveSub}},[e._v("确 定")])],1)],1)],1)},r=[],o=(s("ac6a"),s("f3e2"),s("e8b6")),i=(s("5a30"),{name:"basetable",inject:["reload"],data:function(){return{fullscreenLoading:!1,disabled:!0,delVisible:!1,editVisible:!1,loading:null,menuForm:{id:"0",title:"顶级菜单"},subForm:{},statusMap:{0:"无效",1:"有效"},statusMap1:{"无效":"0","有效":"1"},typeMap:{0:"菜单",1:"按钮"},typeMap1:{"菜单":"0","按钮":"1"},loading2:!0,menuTree:[{id:"0",label:"顶级菜单",children:[]}],menuMap:{0:{}},defaultProps:{children:"children",label:"label"},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],permission:[{required:!0,message:"请输入权限",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],seq:[{required:!0,message:"请输入排序",trigger:"blur"}]},treeIds:[]}},mounted:function(){this.init()},methods:{init:function(){var e=this;e.menuTree[0].children=[],o["a"].post("/system/menu/allMenu",{},(function(t){e.loading2=!1,o["a"].isOK(t)?(e.menuTree[0].children=t.body.lists,e.menuMap=t.body.menuMap):e.$message.error(o["a"].getMsg(t))}))},handleNodeClick:function(e){if(this.$refs["menuForm"]&&this.$refs["menuForm"].clearValidate(),this.disabled=!0,"0"!=e.id){var t=this.menuMap[e.id];null!=t&&null!=t.state&&void 0!=this.statusMap[t.state]&&(t.state=this.statusMap[t.state]),null!=t&&null!=t.type&&void 0!=this.typeMap[t.type]&&(t.type=this.typeMap[t.type]),this.menuForm=t}else this.menuForm={id:"0",title:"顶级菜单"}},handleEdit:function(){this.disabled=!1},handleDel:function(){this.delVisible=!0},handleAddSub:function(){this.$refs["subForm"]&&this.$refs["subForm"].clearValidate(),this.subForm={state:"有效",type:"菜单"},this.subForm.parentName=this.menuForm.title,this.subForm.parent=this.menuForm.id,this.editVisible=!0},showLoading:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},saveEdit:function(){var e=this;e.$refs["menuForm"].validate((function(t){t&&(e.showLoading(),e.menuForm.state=e.statusMap1[e.menuForm.state],e.menuForm.type=e.typeMap1[e.menuForm.type],o["a"].post("/system/menu/addMenu",e.menuForm,(function(t){e.loading&&e.loading.close(),o["a"].isOK(t)?(e.editVisible=!1,e.$message.success("操作成功"),e.reload()):e.$message.error(o["a"].getMsg(t))})))}))},saveSub:function(){var e=this;this.$refs["subForm"].validate((function(t){t&&(e.showLoading(),e.subForm.state=e.statusMap1[e.subForm.state],e.subForm.type=e.typeMap1[e.subForm.type],o["a"].post("/system/menu/addMenu",e.subForm,(function(t){e.loading&&e.loading.close(),o["a"].isOK(t)?(e.editVisible=!1,e.$message.success("操作成功"),e.reload()):e.$message.error(o["a"].getMsg(t))})))}))},findTreeId:function(e,t){var s=this;t.forEach((function(t){var a=e;e===t.parent&&(s.treeIds.push(t.id),a=t.id),null!=t.children&&t.children.length>0&&s.findTreeId(a,t.children)}))},delMenu:function(){var e=this;e.treeIds=[e.menuForm.id],e.findTreeId(e.menuForm.id,e.menuTree),e.showLoading(),o["a"].post("/system/menu/delMenu",{ids:e.treeIds},(function(t){e.loading&&e.loading.close(),o["a"].isOK(t)?(e.editVisible=!1,e.$message.success("操作成功"),e.reload()):e.$message.error(o["a"].getMsg(t))}))}}}),n=i,l=s("2877"),u=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=u.exports},e8b6:function(e,t,s){"use strict";var a=s("bc3a"),r=s.n(a);s("5a30");r.a.defaults.timeout=6e4,r.a.interceptors.request.use((function(e){return e.headers["X-Requested-With"]="XMLHttpRequest","post"===e.method?void 0!=e.data&&(e.headers["Content-type"]="application/json;charset=UTF-8",e.data=JSON.stringify(e.data)):e.params=e.data,e}),(function(e){return Promise.reject(e)})),r.a.defaults.retry=1,r.a.defaults.retryDelay=1e3,r.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(!t||!t.retry)return Promise.reject(e);if(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry)return Promise.reject(e);t.__retryCount+=1;var s=new Promise((function(e){setTimeout((function(){e()}),t.retryDelay||1)}));return s.then((function(){return r()(t)}))}));var o=r.a,i=s("a18c"),n=s("2b0e"),l=function(e,t,s,a,r,o){var i={sort:{}};i.page=t,i.size=s,i.fromData=a,u(e,i,r,o)},u=function(e,t,s,a){o.post("/lib-server/mg"+e,t).then((function(e){s(e.data)})).catch((function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400)",n["default"].prototype.$message.error("请求错误(400)");break;case 401:e.message="未授权，请重新登录(401)",n["default"].prototype.$message.error("未授权，请重新登录(401)");break;case 403:e.message="拒绝访问(403)",n["default"].prototype.$message.error("请求出错(404)");break;case 404:e.message="请求出错(404)",n["default"].prototype.$message.error("请求出错(404)");break;case 408:e.message="请求超时(408)",n["default"].prototype.$message.error("请求超时(408))");break;case 500:e.message="服务器错误(500)",n["default"].prototype.$message.error("服务器错误(500)");break;case 501:e.message="服务未实现(501)",n["default"].prototype.$message.error("服务未实现(501)");break;case 502:e.message="网络错误(502)",n["default"].prototype.$message.error("网络错误(502)");break;case 503:e.message="服务不可用(503)",n["default"].prototype.$message.error("服务不可用(503)");break;case 504:e.message="网络超时(504)",n["default"].prototype.$message.error("网络超时(504)");break;case 1e3:sessionStorage.removeItem("loginInfo"),i["a"].push("/login");break;case 1403:i["a"].push("/403");break;default:e.message="连接出错(".concat(e.response.status,")!")}else e.message="连接服务器失败!",n["default"].prototype.$message.error("连接服务器失败!");a&&a(e),n["default"].prototype.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}).close()}))},m=function(e,t,s){var a="文件下载.xlsx";o.post("/lib-server/mg"+e,t,{responseType:"blob"}).then((function(e){null!=e.headers.filename&&"undefined"!=e.headers.filename&&(a=e.headers.filename);var t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),s=document.createElement("a"),r=window.URL.createObjectURL(t);s.href=r,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)})).catch((function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400)",n["default"].prototype.$message.error("请求错误(400)");break;case 401:e.message="未授权，请重新登录(401)",n["default"].prototype.$message.error("未授权，请重新登录(401)");break;case 403:e.message="拒绝访问(403)",n["default"].prototype.$message.error("请求出错(404)");break;case 404:e.message="请求出错(404)",n["default"].prototype.$message.error("请求出错(404)");break;case 408:e.message="请求超时(408)",n["default"].prototype.$message.error("请求超时(408))");break;case 500:e.message="服务器错误(500)",n["default"].prototype.$message.error("服务器错误(500)");break;case 501:e.message="服务未实现(501)",n["default"].prototype.$message.error("服务未实现(501)");break;case 502:e.message="网络错误(502)",n["default"].prototype.$message.error("网络错误(502)");break;case 503:e.message="服务不可用(503)",n["default"].prototype.$message.error("服务不可用(503)");break;case 504:e.message="网络超时(504)",n["default"].prototype.$message.error("网络超时(504)");break;case 1e3:sessionStorage.removeItem("loginInfo"),i["a"].push("/login");break;case 1403:i["a"].push("/403");break;default:e.message="连接出错(".concat(e.response.status,")!")}else e.message="连接服务器失败!",n["default"].prototype.$message.error("连接服务器失败!");s&&s(e),n["default"].prototype.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}).close()}))},d=function(e){return"0"==e.state},c=function(e){return e.body},p=function(e){return e.msg};t["a"]={post:u,isOK:d,getBody:c,getMsg:p,pageList:l,expExcel:m}}}]);